# üìö –ï–¥–∏–Ω–æ–µ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ - –ù–∞–≤–∏–≥–∞—Ü–∏—è

**UK Management Bot + Media Service - Unified Deployment**

–í–µ—Ä—Å–∏—è: 1.0.0 | –î–∞—Ç–∞: 15.10.2025 | –°—Ç–∞—Ç—É—Å: ‚úÖ Production Ready

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –î–æ—Å—Ç—É–ø

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. **[QUICKSTART.md](QUICKSTART.md)** - –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å! –ó–∞–ø—É—Å–∫ –∑–∞ 3 –º–∏–Ω—É—Ç—ã
2. **[README.UNIFIED.md](README.UNIFIED.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
3. **[.env.unified.example](.env.unified.example)** - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
1. **[UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md)** - –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
2. **[Makefile](Makefile)** - –í—Å–µ –∫–æ–º–∞–Ω–¥—ã (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ `make help`)
3. **[docker-compose.unified.yml](docker-compose.unified.yml)** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker

### –î–ª—è DevOps
1. **[UNIFIED_SUMMARY.md](UNIFIED_SUMMARY.md)** - –†–µ–∑—é–º–µ –∏ —á–µ–∫-–ª–∏—Å—Ç—ã
2. **–°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –°–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ
3. **Production deployment** - –°–º. [UNIFIED_DEPLOYMENT.md#Production](UNIFIED_DEPLOYMENT.md)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```
docker-compose.unified.yml     –ì–ª–∞–≤–Ω—ã–π Docker Compose —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ 5 —Å–µ—Ä–≤–∏—Å–æ–≤ (bot, media-service, media-frontend, postgres, redis)
‚îú‚îÄ‚îÄ 3 volumes (postgres_data, redis_data, media_uploads)
‚îî‚îÄ‚îÄ 1 network (uk-network)

Makefile                       –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ 50+ –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
‚îú‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ Backup/Restore
‚îî‚îÄ‚îÄ –û—Ç–ª–∞–¥–∫–∞

.env                          –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞–π—Ç–µ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞)
.env.unified.example          –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
```

### –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------|-----------|---------------|
| [start-unified.sh](start-unified.sh) | –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ | `./start-unified.sh` |
| [stop-unified.sh](stop-unified.sh) | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ | `./stop-unified.sh` |
| [restart-unified.sh](restart-unified.sh) | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ | `./restart-unified.sh [service]` |
| [logs-unified.sh](logs-unified.sh) | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ | `./logs-unified.sh [service]` |
| [test-media-service.sh](test-media-service.sh) | –¢–µ—Å—Ç Media Service | `./test-media-service.sh` |

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| [README.UNIFIED.md](README.UNIFIED.md) | 15K | **–ì–ª–∞–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ** - –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å! |
| [QUICKSTART.md](QUICKSTART.md) | 4.4K | **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç** - –ó–∞–ø—É—Å–∫ –∑–∞ 3 –º–∏–Ω—É—Ç—ã |
| [UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md) | 14K | **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –í—Å–µ –¥–µ—Ç–∞–ª–∏ |
| [UNIFIED_SUMMARY.md](UNIFIED_SUMMARY.md) | 11K | **–†–µ–∑—é–º–µ** - –ß–µ–∫-–ª–∏—Å—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã |
| [UNIFIED_INDEX.md](UNIFIED_INDEX.md) | - | **–≠—Ç–æ—Ç —Ñ–∞–π–ª** - –ù–∞–≤–∏–≥–∞—Ü–∏—è |

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

```bash
# 1. –ß–∏—Ç–∞–µ–º –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
cat QUICKSTART.md

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
make init

# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp .env.unified.example .env
nano .env  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ BOT_TOKEN

# 4. –ó–∞–ø—É—Å–∫
make start

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞
make status
make health

# 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test-media
open http://localhost:8010
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [QUICKSTART.md](QUICKSTART.md)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Ç—Ä–æ - –∑–∞–ø—É—Å–∫
make start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
make logs-bot

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ - –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ uk_management_bot/ –∏–ª–∏ media_service/app/

# –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
make restart-bot

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test

# –í–µ—á–µ—Ä - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
make stop
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [README.UNIFIED.md](README.UNIFIED.md)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make status

# 2. Healthcheck
make health

# 3. –õ–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏
make logs-bot | grep -i error | tail -50
make logs-media | grep -i error | tail -50

# 4. –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
make logs-bot      # –ë–æ—Ç
make logs-media    # Media Service
make logs-db       # PostgreSQL
make logs-redis    # Redis

# 5. Shell –¥–æ—Å—Ç—É–ø –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
make shell-bot     # Bash –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –±–æ—Ç–∞
make shell-media   # Sh –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ Media Service
make shell-db      # PostgreSQL CLI
make shell-redis   # Redis CLI

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
make restart-bot
make restart-media

# 7. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
make restart
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [UNIFIED_DEPLOYMENT.md#–û—Ç–ª–∞–¥–∫–∞](UNIFIED_DEPLOYMENT.md)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

```bash
# 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –±–æ—Ç–∞
make test

# 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Media Service API
make test-media

# 3. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
curl http://localhost:8009/api/v1/health
curl http://localhost:8009/api/v1/channels | jq

# 4. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
curl -X POST "http://localhost:8009/api/v1/media/upload" \
  -F "file=@test.jpg" \
  -F "channel_id=photos"

# 5. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
open http://localhost:8010

# 6. API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
open http://localhost:8009/docs
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [UNIFIED_DEPLOYMENT.md#–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](UNIFIED_DEPLOYMENT.md)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ backup
make backup-db

# –°–ø–∏—Å–æ–∫ backups
ls -lh backups/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
make restore-db FILE=backups/backup_20241015_120000.sql

# Backup –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
docker run --rm \
  -v uk_media_uploads:/data \
  -v $(pwd):/backup \
  alpine tar czf /backup/media_backup_$(date +%Y%m%d).tar.gz /data
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [UNIFIED_DEPLOYMENT.md#Backup](UNIFIED_DEPLOYMENT.md)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: Production Deployment

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ .env –¥–ª—è production
cp .env .env.production
nano .env.production  # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è production

# 2. –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
DEBUG=false
LOG_LEVEL=WARNING
CORS_ENABLED=false

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å production compose
docker-compose -f docker-compose.prod.yml up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
docker-compose -f docker-compose.prod.yml ps
curl http://localhost:8009/api/v1/health

# 5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx reverse proxy
# –°–º. UNIFIED_DEPLOYMENT.md#Production

# 6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL
certbot --nginx -d api.yourdomain.com

# 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make status
make health
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [UNIFIED_DEPLOYMENT.md#Production](UNIFIED_DEPLOYMENT.md)

---

## üìã –ö–æ–º–∞–Ω–¥—ã Make (Top 20)

### –£–ø—Ä–∞–≤ÔøΩÔøΩ–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
```bash
make start              # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make stop               # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make restart            # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make restart-bot        # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –±–æ—Ç–∞
make restart-media      # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Media Service
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
make status             # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make health             # Healthcheck –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs               # –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs-bot           # –õ–æ–≥–∏ –±–æ—Ç–∞
make logs-media         # –õ–æ–≥–∏ Media Service
make top                # –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
make stats              # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test               # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
make test-media         # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Media Service
```

### –û—Ç–ª–∞–¥–∫–∞
```bash
make shell-bot          # Shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –±–æ—Ç–∞
make shell-media        # Shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ Media Service
make shell-db           # PostgreSQL CLI
make shell-redis        # Redis CLI
```

### –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
```bash
make backup-db          # Backup PostgreSQL
make clean              # –û—á–∏—Å—Ç–∏—Ç—å Docker
make build              # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
```

### –°–ø—Ä–∞–≤–∫–∞
```bash
make help               # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã (50+)
```

---

## üåê Endpoints –∏ –ü–æ—Ä—Ç—ã

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–¥–æ—Å—Ç—É–ø–Ω—ã —Å —Ö–æ—Å—Ç–∞)

| –°–µ—Ä–≤–∏—Å | URL | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|------|----------|
| **Media Service API** | http://localhost:8009 | 8009 | REST API |
| **API Documentation** | http://localhost:8009/docs | 8009 | Swagger UI |
| **Media Frontend** | http://localhost:8010 | 8010 | Web Interface |
| **PostgreSQL** | localhost:5432 | 5432 | Database |
| **Redis** | localhost:6379 | 6379 | Cache |

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker)

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| **Bot Healthcheck** | http://bot:8000/health | Healthcheck –±–æ—Ç–∞ |
| **Media Service (internal)** | http://media-service:8000 | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π URL |

### API Endpoints

**Media Service API:**
```
GET  /api/v1/health          - Healthcheck
GET  /api/v1/channels        - –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
POST /api/v1/media/upload    - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
GET  /api/v1/media/{id}      - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
GET  /api/v1/media/{id}/url  - URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
GET  /api/v1/cache/stats     - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞
GET  /docs                   - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (.env)
```bash
BOT_TOKEN=your_bot_token
ADMIN_IDS=123456789
DATABASE_URL=postgresql://uk_bot:uk_bot_password@postgres:5432/uk_management
REDIS_URL=redis://redis:6379/0
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è (—Å–º. .env.unified.example)
```bash
# Telegram
BOT_TOKEN=your_bot_token
ADMIN_IDS=123456789,987654321

# Database
DATABASE_URL=postgresql://uk_bot:uk_bot_password@postgres:5432/uk_management

# Redis
REDIS_URL=redis://redis:6379/0
USE_REDIS_RATE_LIMIT=true

# Media Service
MEDIA_SERVICE_URL=http://media-service:8000
MAX_FILE_SIZE=52428800
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,mp4,mov,avi,pdf,doc,docx

# Logging
LOG_LEVEL=INFO
DEBUG=false

# Features
SHIFTS_ENABLED=true
AI_ASSIGNMENT_ENABLED=true
```

**–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä**: [.env.unified.example](.env.unified.example)

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              UK Management System                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ Telegram Bot‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Media Service   ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  (Aiogram)  ‚îÇ      ‚îÇ    (FastAPI)     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ      ‚îÇ                  ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  Port: -    ‚îÇ      ‚îÇ  Port: 8009      ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  Handlers   ‚îÇ      ‚îÇ  API Endpoints   ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  Services   ‚îÇ      ‚îÇ  File Storage    ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  FSM States ‚îÇ      ‚îÇ  Telegram Upload ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ                     ‚îÇ
‚îÇ         ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ         ‚ñº    ‚ñº                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ       PostgreSQL Database        ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ          Port: 5432              ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  Tables:                         ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ users                         ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ requests                      ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ shifts                        ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ media_files                   ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ ...                           ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ          Redis Cache             ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ          Port: 6379              ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ                                  ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  DB 0: Bot cache & sessions      ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  DB 1: Media Service cache       ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ      Media Frontend (Nginx)      ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ          Port: 8010              ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  Static HTML + JS test interface ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

External Services:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Telegram API     ‚îÇ
‚îÇ Bot API Server   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Docker Volumes

```
postgres_data       ‚Üí PostgreSQL database files
redis_data          ‚Üí Redis persistence files
media_uploads       ‚Üí Uploaded media files
```

### Docker Networks

```
uk-network (bridge)
  ‚îú‚îÄ‚îÄ bot
  ‚îú‚îÄ‚îÄ media-service
  ‚îú‚îÄ‚îÄ media-frontend
  ‚îú‚îÄ‚îÄ postgres
  ‚îî‚îÄ‚îÄ redis
```

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –ï–¥–∏–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –û–¥–∏–Ω Docker Compose —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- Healthcheck –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

### ‚úÖ –£–¥–æ–±–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- Hot-reload –¥–ª—è –±–æ—Ç–∞ –∏ Media Service
- Volume mapping –¥–ª—è –∫–æ–¥–∞
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### ‚úÖ 50+ –∫–æ–º–∞–Ω–¥ Make
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Backup/Restore
- –û—Ç–ª–∞–¥–∫–∞

### ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- FAQ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### ‚úÖ Production Ready
- Healthcheck –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- Persistence –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üÜò –ü–æ–º–æ—â—å

### –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã

**Q: –ö–∞–∫ –Ω–∞—á–∞—Ç—å?**
A: –ß–∏—Ç–∞–π—Ç–µ [QUICKSTART.md](QUICKSTART.md)

**Q: –ù–µ –º–æ–≥—É –∑–∞–ø—É—Å—Ç–∏—Ç—å**
A: `make health` ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ‚Üí [UNIFIED_DEPLOYMENT.md#–û—Ç–ª–∞–¥–∫–∞](UNIFIED_DEPLOYMENT.md)

**Q: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç**
A: `lsof -i :8009` ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å

**Q: –ì–¥–µ –ª–æ–≥–∏?**
A: `make logs` –∏–ª–∏ `make logs-bot` –∏–ª–∏ `make logs-media`

**Q: –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥?**
A: –ü—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª - hot-reload –ø—Ä–∏–º–µ–Ω–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**Q: –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å backup?**
A: `make backup-db`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–∞–º

| –¢–µ–º–∞ | –î–æ–∫—É–º–µ–Ω—Ç | –†–∞–∑–¥–µ–ª |
|------|----------|--------|
| –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç | [QUICKSTART.md](QUICKSTART.md) | –í—Å–µ |
| –£—Å—Ç–∞–Ω–æ–≤–∫–∞ | [README.UNIFIED.md](README.UNIFIED.md) | Quick Start |
| –ö–æ–º–∞–Ω–¥—ã | [Makefile](Makefile) | `make help` |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | [.env.unified.example](.env.unified.example) | –í—Å–µ |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | [UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md) | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | [UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md) | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –û—Ç–ª–∞–¥–∫–∞ | [UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md) | –û—Ç–ª–∞–¥–∫–∞ |
| Production | [UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md) | Production |
| FAQ | [UNIFIED_DEPLOYMENT.md](UNIFIED_DEPLOYMENT.md) | FAQ |
| –†–µ–∑—é–º–µ | [UNIFIED_SUMMARY.md](UNIFIED_SUMMARY.md) | –í—Å–µ |

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–∞–º–æ–ø–æ–º–æ—â–∏
```bash
make help           # –í—Å–µ –∫–æ–º–∞–Ω–¥—ã
make status         # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
make health         # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
make logs           # –õ–æ–≥–∏
```

### GitHub Issues
–°–æ–∑–¥–∞–π—Ç–µ issue —Å:
- –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
- –í—ã–≤–æ–¥–æ–º `make status`
- –õ–æ–≥–∞–º–∏ `make logs-bot` / `make logs-media`
- –í–µ—Ä—Å–∏–µ–π Docker: `docker --version`

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v1.0.0 (15.10.2025)
- ‚úÖ –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π Docker Compose —Ñ–∞–π–ª
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Makefile —Å 50+ –∫–æ–º–∞–Ω–¥–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (start, stop, restart, logs, test)
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (15K —Å–ª–æ–≤)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω hot-reload –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã healthcheck –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º
- [ ] Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü–æ—Ä—Ç—ã 5432, 6379, 8009, 8010 —Å–≤–æ–±–æ–¥–Ω—ã
- [ ] –°–æ–∑–¥–∞–Ω .env —Ñ–∞–π–ª (–∏–∑ .env.unified.example)
- [ ] BOT_TOKEN —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ .env
- [ ] ADMIN_IDS —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ .env
- [ ] –ú–∏–Ω–∏–º—É–º 2GB RAM –¥–æ—Å—Ç—É–ø–Ω–æ

### –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
- [ ] `make status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã Up (healthy)
- [ ] `make health` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] http://localhost:8009/api/v1/health –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç success
- [ ] http://localhost:8010 –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

---

**–í–µ—Ä—Å–∏—è**: 1.0.0
**–î–∞—Ç–∞**: 15 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready

**–ù–∞—á–Ω–∏—Ç–µ —Å**: [QUICKSTART.md](QUICKSTART.md)
