## PLAN

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥–µ–ª–µ–π)

- **–ü–æ–ª–∏—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ —Å—Ç–∞—Ç—É—Å—ã**
  - –í–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–≥—É—é –ø–æ–ª–∏—Ç–∏–∫—É: `pending` ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª—å/–æ–Ω–±–æ—Ä–¥–∏–Ω–≥; —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –∏ –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã; `approved` ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø–æ —Ä–æ–ª–∏; `blocked` ‚Äî –º—è–≥–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å —è–≤–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
  - –¢–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è:
    - Middleware –Ω–∞ —É—Ä–æ–≤–Ω–µ –∞–ø–¥–µ–π—Ç–æ–≤/—Ä–æ—É—Ç–µ—Ä–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ç—Å–µ—á–∫–∏ –ø–æ `status`.
    - –í —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö ¬´–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É¬ª, ¬´–ú–æ–∏ –∑–∞—è–≤–∫–∏¬ª, –≤—Å–µ –∞–¥–º–∏–Ω/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è ‚Äî —Ä–∞–Ω–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: —Ç–µ—Å—Ç—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç, —á—Ç–æ `pending` –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å/–º–µ–Ω—è—Ç—å –∑–∞—è–≤–∫–∏; `blocked` –ø–æ–ª—É—á–∞–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.

- **–ò–Ω–≤–∞–π—Ç—ã (–±–µ–∑ –ë–î-—Ç–∞–±–ª–∏—Ü)**
  - –°—Ç–∞—Ç–ª–µ—Å‚Äë–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: HMAC‚Äë–ø–æ–¥–ø–∏—Å—å —Å `INVITE_SECRET` (env), –≤ —Ç–æ–∫–µ–Ω–µ: `role`, `specialization` (–¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è), `expires_at`, `nonce`.
  - –ö–æ–º–∞–Ω–¥—ã:
    - –ú–µ–Ω–µ–¥–∂–µ—Ä: ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—ã–π¬ª ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω/QR.
    - –ö–∞–Ω–¥–∏–¥–∞—Ç: `/join <token>` ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø–æ–¥–ø–∏—Å—å, —Å—Ä–æ–∫), —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `roles+=role`, `status="pending"`, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `specialization` (–µ—Å–ª–∏ executor).
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: rate‚Äëlimit –Ω–∞ –≤–≤–æ–¥ —Ç–æ–∫–µ–Ω–∞, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ—Å—Ç—å —á–µ—Ä–µ–∑ `nonce`/AuditLog (–ø–æ–º–µ—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ).
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: —Ç–æ–∫–µ–Ω—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –ë–î‚Äë—Å—Ö–µ–º; –Ω–µ–≤–µ—Ä–Ω—ã–µ/–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è; –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–∏—à—É—Ç—Å—è –≤ `AuditLog`.

- **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∑–∞—è–≤–∏—Ç–µ–ª—è**
  - `/start` ‚Üí –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ + ¬´–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º¬ª (request_contact) ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `phone`.
  - –°–±–æ—Ä `home_address` (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è).
  - –°—Ç–∞—Ç—É—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `pending` –¥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –ø–æ—Å–ª–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ `pending`; –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª—å/–ø–æ–º–æ—â—å.

- **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è**
  - `/join <token>` (—Ç–∏–ø `executor`) ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `specialization` –∏–∑ —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ –≤—ã–±–æ—Ä –∏–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç.
  - –°—Ç–∞—Ç—É—Å `pending` –¥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –±–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–∏—è ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–º–µ–Ω–∞–º/–¥–µ–π—Å—Ç–≤–∏—è–º; –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–º–µ–Ω–µ.

- **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã: —Å—É–ø–µ—Ä‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è**
  - –°—É–ø–µ—Ä‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä –∏–∑ env (ID/—Å–ø–∏—Å–æ–∫ ID). –ü–µ—Ä–≤–∏—á–Ω–∞—è –≤—ã–¥–∞—á–∞ –ø—Ä–∞–≤ ‚Äî —á–µ—Ä–µ–∑ –ø–∞—Ä–æ–ª—å –∏–∑ env (–±–µ–∑ –¥–µ—Ñ–æ–ª—Ç–∞).
  - –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞: —Ç–æ–∫–µ–Ω —Ç–∏–ø–∞ `manager`, –∑–∞—Ç–µ–º —Ä—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ –ø–∞–Ω–µ–ª–∏ (–¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ).
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∏–Ω–≤–∞–π—Ç; –ø–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ `manager` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ `AuditLog` –∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

- **–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)**
  - –°–ø–∏—Å–∫–∏: –Ω–æ–≤—ã–µ (pending), –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ –≤—Å–µ–º –∏ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º.
  - –î–µ–π—Å—Ç–≤–∏—è:
    - –û–¥–æ–±—Ä–∏—Ç—å/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º (–≤ `AuditLog.details`).
    - –ù–∞–∑–Ω–∞—á–∏—Ç—å/—Å–Ω—è—Ç—å —Ä–æ–ª–∏ (–∏–∑ –Ω–∞–±–æ—Ä–∞ `applicant/executor/manager`).
    - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
  - ¬´–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π¬ª: —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –º–∞—Å—Å–æ–≤–æ–µ/–º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π.
    - –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏: —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π –∫–∞–∫ CSV –≤ `User.specialization` (–≤–∞–ª–∏–¥–∞—Ü–∏—è/–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏/–∑–∞–ø–∏—Å–∏).
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º; –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–∏—à—É—Ç—Å—è –≤ –∞—É–¥–∏—Ç; —Å–ø–∏—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

- **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (UI/–¥–∞–Ω–Ω—ã–µ)**
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞/—Ä–æ–ª–µ–π/–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–æ–ª–∏/—Ç–µ–ª–µ—Ñ–æ–Ω–∞.
  - –ê–¥—Ä–µ—Å–∞: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å `home_address`, `apartment_address`, `yard_address`. 
    - –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è ¬´–Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–≤–æ—Ä–æ–≤¬ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `;` –≤ `yard_address` –∏ –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–æ–º.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –ø—Ä–æ—Ñ–∏–ª—å —Ü–µ–ª–æ—Å—Ç–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ; –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∏.

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç**
  - –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤–≤–æ–¥ –∏–Ω–≤–∞–π—Ç–∞ (role, exp, ok/fail), –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ/—Å–Ω—è—Ç–∏–µ —Ä–æ–ª–µ–π, —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞, —Å–º–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–¥–æ–±—Ä–µ–Ω–∏–µ/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞.
  - –§–æ—Ä–º–∞—Ç `AuditLog.details`: –∫—Ä–∞—Ç–∫–∏–π JSON —Å –∫–ª—é—á–µ–≤—ã–º–∏ –ø–æ–ª—è–º–∏.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: —Å–æ–±—ã—Ç–∏—è –≤–∏–¥–Ω—ã —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–æ–π —ç–∫—Å–ø–æ—Ä—Ç/–ª–æ–≥.

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∑–∞—â–∏—Ç–∞**
  - Rate‚Äëlimit –Ω–∞ `/join` –∏ –≤–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ (–≤ –ø–∞–º—è—Ç–∏; –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –¥–ª—è —Å–º–µ–Ω—ã —Ä–æ–ª–∏).
  - –ó–∞–ø—Ä–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ `ADMIN_PASSWORD`; –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π `INVITE_SECRET` –∏ SUPER_MANAGER_IDS.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –∑–∞—â–∏—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã; –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è.

- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**
  - –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏: –æ–Ω–±–æ—Ä–¥–∏–Ω–≥, ¬´–≤—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã¬ª, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞/–ø—Ä–æ—Å—Ä–æ—á–µ–Ω), —Å–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ), –ø–æ—è—Å–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: RU/UZ –ø–æ–∫—Ä—ã—Ç—ã; fallback —Ä–∞–±–æ—Ç–∞–µ—Ç.

- **–¢–µ—Å—Ç—ã**
  - –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã:
    - –í–∞–ª–∏–¥–∞—Ü–∏—è/–ø–∞—Ä—Å–∏–Ω–≥ –∏–Ω–≤–∞–π—Ç–æ–≤ (HMAC, exp, role, specialization).
    - –ü–æ–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤: `pending` ‚Äî –∑–∞–ø—Ä–µ—Ç—ã; `blocked` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞.
    - –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ —Ä–æ–ª–µ–π, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (CSV).
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ:
    - –ü–æ—Ç–æ–∫ –∑–∞—è–≤–∏—Ç–µ–ª—è: –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ ‚Üí pending ‚Üí –æ–¥–æ–±—Ä–µ–Ω–∏–µ ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏.
    - –ü–æ—Ç–æ–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è: –∏–Ω–≤–∞–π—Ç ‚Üí pending ‚Üí –æ–¥–æ–±—Ä–µ–Ω–∏–µ ‚Üí —Å–º–µ–Ω–∞ ‚Üí –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ –∑–∞—è–≤–∫–µ.
    - –ü–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞: –∏–Ω–≤–∞–π—Ç ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –¥–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –≤—Å–µ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ, –±–µ–∑ —Ä–µ–≥—Ä–µ—Å—Å–∞ —Ç–µ–∫—É—â–∏—Ö.

- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è/—Ñ–ª–∞–≥–∏**
  - Env:
    - `INVITE_SECRET` (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω), `SUPER_MANAGER_IDS` (—Å–ø–∏—Å–æ–∫), `AUTO_APPROVE_APPLICANTS=false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), `JOIN_RATE_LIMIT_WINDOW`, `JOIN_RATE_LIMIT_MAX`.
  - –ö—Ä–∏—Ç–µ—Ä–∏–∏: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å —è–≤–Ω—ã–º –ª–æ–≥–æ–º.

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–æ–ª–Ω—ã)

- **‚úÖ Wave 1 (–ü–æ–ª–∏—Ç–∏–∫–∏ –∏ –±–∞–∑–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è) ‚Äî –ó–ê–í–ï–†–®–ï–ù–û**
  - ‚úÖ –°—Ç—Ä–æ–≥–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ + –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è ¬´–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω¬ª.
  - ‚úÖ –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∑–∞—è–≤–∏—Ç–µ–ª—è (—Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å).
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ.
  - ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã.

- **‚úÖ Wave 2 (–ò–Ω–≤–∞–π—Ç—ã) ‚Äî –ó–ê–í–ï–†–®–ï–ù–û**
  - ‚úÖ HMAC‚Äë—Ç–æ–∫–µ–Ω—ã, `/join`, rate‚Äëlimit, –∞—É–¥–∏—Ç.
  - ‚úÖ –ò–Ω–≤–∞–π—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.
  - ‚úÖ –¢–µ—Å—Ç—ã –∏–Ω–≤–∞–π—Ç–æ–≤ (16 —Ç–µ—Å—Ç–æ–≤, 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å).
  - ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã.

- **üîÑ Wave 3 (–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞) ‚Äî –°–õ–ï–î–£–Æ–©–ò–ô**
  - –°–ø–∏—Å–∫–∏ (–Ω–æ–≤—ã–µ/–æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ; —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ).
  - –î–µ–π—Å—Ç–≤–∏—è: –æ–¥–æ–±—Ä–∏—Ç—å/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/—Ä–æ–ª–∏/—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (CSV).
  - –¢–µ—Å—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

- **Wave 4 (–ú–µ–Ω–µ–¥–∂–µ—Ä—ã)**
  - –°—É–ø–µ—Ä‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä –∏–∑ env; –∏–Ω–≤–∞–π—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞; –¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
  - –¢–µ—Å—Ç—ã –ø–æ–≤—ã—à–µ–Ω–∏—è.

- **Wave 5 (–ü–æ–ª–∏—Ä–æ–≤–∫–∞/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)**
  - –£—Å–∏–ª–µ–Ω–∏–µ rate‚Äëlimit, –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, UX‚Äë—É–ª—É—á—à–µ–Ω–∏—è, –ª–æ–∫–∞–ª–∏.

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π: –∏—Å–ø–æ–ª—å–∑—É–µ–º `AuditLog` –¥–ª—è —Å–æ–±—ã—Ç–∏–π, —Å—Ç–∞—Ç–ª–µ—Å‚Äë–∏–Ω–≤–∞–π—Ç—ã (HMAC), CSV –≤ `User.specialization` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π).
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ç–µ–∫—É—â–∏–º–∏ middleware/—Å–µ—Ä–≤–∏—Å–∞–º–∏: —Ä–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –∏ —Å–º–µ–Ω—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏, –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –Ω–æ–≤—ã–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã/–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã/—Ç–µ–∫—Å—Ç—ã.

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (DoD)

- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –ø–æ —Ä–æ–ª—è–º**: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ç–µ—Å—Ç–∞–º–∏ –∏ UI.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º —á–µ—Ä–µ–∑ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è/–æ–¥–æ–±—Ä–µ–Ω–∏—è**: —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü.
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞**: —Ç–µ–∫—É—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–µ –ª–æ–º–∞—é—Ç—Å—è.
- **–ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π**: –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è.

- –ò—Ç–æ–≥: –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–∏—Ç–∏–∫—É —Å—Ç–∞—Ç—É—Å–æ–≤, –∏–Ω–≤–∞–π—Ç—ã –±–µ–∑ —Å—Ö–µ–º—ã –ë–î, –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫—É—é –º–æ–¥–µ—Ä–∞—Ü–∏—é, –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç–µ—Å—Ç—ã, —Å–æ–±–ª—é–¥–∞—è –≤–∞—à–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.


### –¢–∏–∫–µ—Ç—ã (AUTH-*)

- AUTH-1: –ü–æ–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ ‚Äî –±–∞–∑–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  - –°—É—Ç—å: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø `pending/blocked` –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware –∏ —Ä–∞–Ω–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∫–ª—é—á–µ–≤—ã—Ö —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö.
  - DoD: `pending` –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—è–≤–∫–∏; `blocked` –ø–æ–ª—É—á–∞–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ; —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ.

- AUTH-2: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
  - –°—É—Ç—å: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç—ã RU/UZ –¥–ª—è ¬´–≤—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã¬ª, –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è `pending`/–æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞.
  - DoD: –ö–ª—é—á–∏ –≤ –ª–æ–∫–∞–ª—è—Ö, –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ `get_text`.

- AUTH-3: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∑–∞—è–≤–∏—Ç–µ–ª—è (—Ç–µ–ª–µ—Ñ–æ–Ω + –±–∞–∑–æ–≤—ã–π –∞–¥—Ä–µ—Å)
  - –°—É—Ç—å: –°—Ü–µ–Ω–∞—Ä–∏–π `/start` ‚Üí request_contact ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `phone` ‚Üí –≤–≤–æ–¥ `home_address` (–≤–∞–ª–∏–¥–∞—Ü–∏—è/–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è).
  - DoD: –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–æ `pending` —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª—è/–ø–æ–º–æ—â–∏; —Ç–µ—Å—Ç –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.

- ‚úÖ AUTH-4: –ò–Ω–≤–∞–π—Ç—ã ‚Äî —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞ (—Å—Ç–∞—Ç–ª–µ—Å, HMAC) ‚Äî –ó–ê–í–ï–†–®–ï–ù–û
  - –°—É—Ç—å: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–æ–∫–µ–Ω–∞ (`role`, `specialization`, `expires_at`, `nonce`) –∏ HMAC‚Äë–ø–æ–¥–ø–∏—Å—å c `INVITE_SECRET`.
  - DoD: ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ + —é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã (–≤–∞–ª–∏–¥–Ω—ã–π, –ø—Ä–æ—Å—Ä–æ—á–µ–Ω, –ø–æ–¥–¥–µ–ª–∫–∞).

- ‚úÖ AUTH-5: –ö–æ–º–∞–Ω–¥–∞ `/join <token>` ‚Äî –ó–ê–í–ï–†–®–ï–ù–û
  - –°—É—Ç—å: –ü—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–∫–µ–Ω, –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å, –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª—å, –ø—Ä–æ—Å—Ç–∞–≤–ª—è—Ç—å `status="pending"`, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.
  - DoD: ‚úÖ –û—Ç–∫–∞–∑—ã –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–µ/–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ; –∑–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏—è –≤ `AuditLog`; —é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã.

- ‚úÖ AUTH-6: Rate‚Äëlimit –Ω–∞ `/join` ‚Äî –ó–ê–í–ï–†–®–ï–ù–û
  - –°—É—Ç—å: –ó–∞—â–∏—Ç–∏—Ç—å –≤–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ (–æ–∫–Ω–æ –∏ –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫, in‚Äëmemory).
  - DoD: ‚úÖ –õ–∏–º–∏—Ç —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è; –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã.

**üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã AUTH-4, AUTH-5, AUTH-6:**
- üîê HMAC-SHA256 —Ç–æ–∫–µ–Ω—ã —Å JSON payload
- ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2000+ —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, 8000+ —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- üõ°Ô∏è Rate limiting: 3 –ø–æ–ø—ã—Ç–∫–∏ –≤ 10 –º–∏–Ω—É—Ç
- üß™ 16 —Ç–µ—Å—Ç–æ–≤ (100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å)
- üåê –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è RU/UZ
- üìà –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: 100%

- AUTH-7: –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚Äî —Å–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –°—É—Ç—å: –†–∞–∑–¥–µ–ª—ã: ¬´–ù–æ–≤—ã–µ¬ª, ¬´–û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ¬ª, ¬´–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ¬ª, –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
  - DoD: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è; –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É.

- AUTH-8: –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚Äî –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –°—É—Ç—å: –û–¥–æ–±—Ä–∏—Ç—å/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å, –Ω–∞–∑–Ω–∞—á–∏—Ç—å/—Å–Ω—è—Ç—å —Ä–æ–ª–∏; –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ `AuditLog.details`.
  - DoD: –í—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∞—É–¥–∏—Ç–µ; —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.

- AUTH-9: –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - –°—É—Ç—å: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ/–º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π (CSV –≤ `User.specialization` –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏).
  - DoD: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π, —Ç–µ—Å—Ç—ã.

- AUTH-10: –ü—Ä–æ—Ñ–∏–ª—å ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - –°—É—Ç—å: –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞/—Ä–æ–ª–µ–π/active_role/phone –∏ –∞–¥—Ä–µ—Å–æ–≤ (`home/apartment/yard`; yard –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `;` –¥–ª—è —Å–ø–∏—Å–∫–∞).
  - DoD: –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–≤–æ—Ä–æ–≤.

- AUTH-11: –°—É–ø–µ—Ä‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä –∏ –∏–Ω–≤–∞–π—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞
  - –°—É—Ç—å: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SUPER_MANAGER_IDS –∏–∑ env; –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–æ–≥–æ –∏–Ω–≤–∞–π—Ç–∞; –¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–≤—ã—à–µ–Ω–∏—è.
  - DoD: –ê—É–¥–∏—Ç –ø–æ–≤—ã—à–µ–Ω–∏—è; —Ç–µ—Å—Ç—ã –Ω–∞ –¥–æ—Å—Ç—É–ø/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.

- AUTH-12: –ê—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
  - –°—É—Ç—å: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, `/join`, —Ä–æ–ª–∏/—Å—Ç–∞—Ç—É—Å—ã, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–¥–æ–±—Ä–µ–Ω–∏–µ/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ‚Äî –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç details.
  - DoD: –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã –Ω–∞ –∑–∞–ø–∏—Å—å –∞—É–¥–∏—Ç–∞; –≤—ã–±–æ—Ä–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π.

- AUTH-13: –ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ (E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏)
  - –°—É—Ç—å: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∑–∞—è–≤–∏—Ç–µ–ª—è (pending‚Üíapproved‚Üí—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏), –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (–∏–Ω–≤–∞–π—Ç‚Üíapproved‚Üí—Å–º–µ–Ω–∞‚Üí–¥–µ–π—Å—Ç–≤–∏–µ), –ø–æ–≤—ã—à–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
  - DoD: –í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∑–µ–ª—ë–Ω—ã–µ, —Ä–µ–≥—Ä–µ—Å—Å –Ω–µ—Ç.

- AUTH-14: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  - –°—É—Ç—å: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `INVITE_SECRET`, `SUPER_MANAGER_IDS`; –∑–∞–ø—Ä–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ `ADMIN_PASSWORD`.
  - DoD: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Üí —è–≤–Ω—ã–π –ª–æ–≥ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π; —Ç–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.


## PLAN AUTH-1 ‚Äî –ü–æ–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (pending/approved/blocked)

### –¶–µ–ª–∏
- –í–≤–µ—Å—Ç–∏ –±–∞–∑–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware –∏ —Ä–∞–Ω–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö:
  - `blocked` ‚Äî –º—è–≥–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (–æ–¥–Ω–æ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –¥–∞–ª—å–Ω–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è).
  - `pending` ‚Äî –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ –ø—Ä–æ—Ñ–∏–ª—é/–æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É/—Å–ø—Ä–∞–≤–∫–µ; –ª—é–±—ã–µ ¬´—Ä–∞–±–æ—á–∏–µ¬ª –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫, –∞–¥–º–∏–Ω/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, –∑–∞–ø—É—Å–∫/—Å–¥–∞—á–∞ —Å–º–µ–Ω) –∑–∞–ø—Ä–µ—â–µ–Ω—ã —Å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–æ–π.
  - `approved` ‚Äî –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–æ–ª—è–º/—Ä–µ–∂–∏–º—É –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Å–º–µ–Ω.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –º–æ–¥—É–ª—è–º
- `uk_management_bot/middlewares/auth.py`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ `utils.helpers.get_text` –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞.
  - –î–ª—è `blocked`: –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `get_text("auth.blocked", language)` –∏ –∑–∞–≤–µ—Ä—à–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É (return –±–µ–∑ –≤—ã–∑–æ–≤–∞ `handler`).
  - –î–ª—è `pending`: –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å `data["user_status"] = "pending"`; –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å (—Ä–µ—à–µ–Ω–∏–µ ‚Äî –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤ —Å —Ä–∞–Ω–Ω–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏).
  - –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è (–ø—Ä–æ—Å—Ç–µ–π—à–∏–π —Ñ–ª–∞–≥ –≤ `data`, –Ω–∞–ø—Ä–∏–º–µ—Ä `data["_auth_warned"] = True`).

- `uk_management_bot/handlers/requests.py`
  - –í —Ç–æ—á–∫–∞—Ö ¬´–ø–µ—Ä–≤–æ–≥–æ –∫–∞—Å–∞–Ω–∏—è¬ª —Ä–∞–±–æ—á–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è) –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–Ω–Ω—é—é –ø—Ä–æ–≤–µ—Ä–∫—É `user_status == "pending"` ‚Üí –æ—Ç–≤–µ—Ç `get_text("auth.pending")` –∏ —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥.
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–æ–≤ –∏ –¥–µ—Ç–∞–ª–µ–π ‚Äî —Ä–∞–∑—Ä–µ—à–∏—Ç—å, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ.

- `uk_management_bot/handlers/shifts.py`
  - –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º/—Å–¥–∞—á–µ–π —Å–º–µ–Ω—ã ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞: –ø—Ä–∏ `pending` ‚Üí `get_text("auth.pending")`, —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥.

- `uk_management_bot/handlers/admin.py`
  - –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞: `user_status == "approved"` + –Ω–∞–ª–∏—á–∏–µ —Ä–æ–ª–∏ `manager`. –ü—Ä–∏ `pending`/`blocked` ‚Äî –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–∫–∞–∑.

- `uk_management_bot/config/locales/{ru,uz}.json`
  - –ö–ª—é—á–∏ —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç: `auth.blocked`, `auth.pending`, `auth.approved` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–∞–≤–∫–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

### –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ (UX)
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–ø–∞–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ/–¥–µ–π—Å—Ç–≤–∏–µ.
- –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (`/start`, `/help`, –ø—Ä–æ—Ñ–∏–ª—å) –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ –ª—é–±–æ–º —Å—Ç–∞—Ç—É—Å–µ.
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ, –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ, –±–µ–∑ –∞–ª–µ—Ä—Ç–æ–≤, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ `blocked`.

### DoD (–∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏)
- `blocked`: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –¥–∞–ª—å–Ω–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.
- `pending`: —Å–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫, —Å–º–µ–Ω—ã –∏ –∞–¥–º–∏–Ω‚Äë–¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º; –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ (–±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤ –≤ middleware/—Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö).
- –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º; –¥–µ—Ñ–æ–ª—Ç—ã –∏ —Ñ–æ–ª–±—ç–∫ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç.
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã ‚Äî –∑–µ–ª—ë–Ω—ã–µ; –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–ª–∏—Ç–∏–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ ‚Äî –∑–µ–ª—ë–Ω—ã–µ.

### –¢–µ—Å—Ç‚Äë–ø–ª–∞–Ω
- –Æ–Ω–∏—Ç:
  - `middlewares/auth.py`: —Å–æ–±—ã—Ç–∏–µ Message/CallbackQuery –¥–ª—è `blocked` (—Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥) –∏ `pending` (–º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞, –±–µ–∑ —Ä–∞–Ω–Ω–µ–≥–æ –≤—ã—Ö–æ–¥–∞).
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏: `get_text("auth.blocked")`/`get_text("auth.pending")` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç—Ä–æ–∫–∏ –¥–ª—è RU/UZ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–æ–ª–±—ç—á–∞—Ç—Å—è –Ω–∞ RU.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
  - –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –ø—Ä–∏ `pending` ‚Üí –æ—Ç–∫–∞–∑ —Å `auth.pending`; –ø—Ä–∏ `approved` ‚Üí —É—Å–ø–µ—Ö.
  - –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–º–µ–Ω—ã –ø—Ä–∏ `pending` ‚Üí –æ—Ç–∫–∞–∑; –ø—Ä–∏ `approved` ‚Üí —É—Å–ø–µ—Ö.
  - –ê–¥–º–∏–Ω‚Äë–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ `pending`/`blocked` ‚Üí –æ—Ç–∫–∞–∑, –ø—Ä–∏ `approved` + `manager` ‚Üí —É—Å–ø–µ—Ö.

### –ö–æ–º–∞–Ω–¥—ã
```bash
pytest -k "auth or requests or shifts or admin" -q | cat
```


## CREATIVE AUTH-1 ‚Äî –î–∏–∑–∞–π–Ω –ø–æ–ª–∏—Ç–∏–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤

1Ô∏è‚É£ –ü–†–û–ë–õ–ï–ú–ê
- –ù—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  - `blocked` ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—Ä–µ—â—ë–Ω –¥–æ—Å—Ç—É–ø —Å –º—è–≥–∫–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º.
  - `pending` ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã/–ø—Ä–æ—Ñ–∏–ª—å/–æ–Ω–±–æ—Ä–¥–∏–Ω–≥; ¬´—Ä–∞–±–æ—á–∏–µ¬ª –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫, —Å–º–µ–Ω—ã, –∞–¥–º–∏–Ω‚Äë—Ñ—É–Ω–∫—Ü–∏–∏) –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫–ª–æ–Ω—è—Ç—å—Å—è.
  - `approved` ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, –¥–∞–ª–µ–µ –¥–µ–π—Å—Ç–≤—É—é—Ç RBAC –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–º–µ–Ω.

2Ô∏è‚É£ –û–ü–¶–ò–ò
- A: –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `pending` –≤ middleware (–∫–∞–∫ `blocked`) ‚Äî —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –¥–ª—è –ª—é–±—ã—Ö —Å–æ–±—ã—Ç–∏–π.
- B: Middleware —Ç–æ–ª—å–∫–æ –º–∞—Ä–∫–∏—Ä—É–µ—Ç `data['user_status']`, –∞ —Ä–∞–Ω–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ç–≤–µ—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ—á–µ—á–Ω–æ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö ¬´—Ä–∞–±–æ—á–∏—Ö¬ª –¥–µ–π—Å—Ç–≤–∏–π.
- C: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö (Request/Shift/Admin): —Å–µ—Ä–≤–∏—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–∫–∞–∑ –ø–æ —Å—Ç–∞—Ç—É—Å—É, –∞ —Ö—ç–Ω–¥–ª–µ—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.

3Ô∏è‚É£ –ê–ù–ê–õ–ò–ó
| –ö—Ä–∏—Ç–µ—Ä–∏–π | A: –±–ª–æ–∫ –≤ middleware | B: –º–µ—Ç–∫–∞ + –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö | C: –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö |
|---|---|---|---|
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –¢–æ—á–Ω–æ—Å—Ç—å UX | ‚≠ê‚≠ê (–≥—Ä—É–±–∞—è –æ—Ç—Å–µ—á–∫–∞) | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (–ø–æ –º–µ—Å—Ç—É –¥–µ–π—Å—Ç–≤–∏—è) | ‚≠ê‚≠ê‚≠ê‚≠ê |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –†–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |

–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã:
- –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `pending` (A) –ª–æ–º–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Ñ–∏–ª—é/–æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É –∏ –º–µ—à–∞–µ—Ç –≥–∏–±–∫–æ–º—É UX.
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö (B) –¥–∞—é—Ç –Ω–∞–∏–ª—É—á—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ¬´–ø–æ –º–µ—Å—Ç—É¬ª –±–µ–∑ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è.
- –°–µ—Ä–≤–∏—Å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (C) –ø–æ–ª–µ–∑–Ω—ã –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞, –Ω–æ —É—Å–ª–æ–∂–Ω—è—é—Ç —Å–ª–æ–π –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∏ –∏ –¥—É–±–ª–∏—Ä—É—é—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.

4Ô∏è‚É£ –†–ï–®–ï–ù–ò–ï
- –í—ã–±—Ä–∞—Ç—å B: middleware —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `data['user']` –∏ `data['user_status']`, –¥–ª—è `blocked` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º—è–≥–∫—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏ —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥; –¥–ª—è `pending` ‚Äî –ù–ï –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É.
- ¬´–†–∞–±–æ—á–∏–µ¬ª —Ö—ç–Ω–¥–ª–µ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–∞–Ω–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∏ –æ—Ç–≤–µ—á–∞—é—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º (`auth.pending`).

5Ô∏è‚É£ –ò–ú–ü–õ–ï–ú–ï–ù–¢–ê–¶–ò–û–ù–ù–´–ï –ó–ê–ú–ï–¢–ö–ò
- Middleware (`middlewares/auth.py`):
  - –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è `blocked` –±—Ä–∞—Ç—å —á–µ—Ä–µ–∑ `get_text('auth.blocked', language)`; –¥–ª—è CallbackQuery ‚Äî `show_alert=True`.
  - –î–ª—è `pending`: —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `data['user_status'] = 'pending'`, –±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ä–∞–Ω–Ω–µ–≥–æ –≤—ã—Ö–æ–¥–∞.
  - Fail‚Äësafe: –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö ‚Äî –¥–µ—Ñ–æ–ª—Ç—ã –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏.
- –•—ç–Ω–¥–ª–µ—Ä—ã (—Ä–∞–Ω–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏):
  - `handlers/requests.py`: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ ‚Äî –ø—Ä–∏ `pending` ‚Üí –æ—Ç–≤–µ—Ç `get_text('auth.pending')`, —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥; –ø—Ä–æ—Å–º–æ—Ç—Ä/—Å–ø–∏—Å–∫–∏ ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω—ã.
  - `handlers/shifts.py`: —Å—Ç–∞—Ä—Ç/—Å–¥–∞—á–∞ —Å–º–µ–Ω—ã ‚Äî –æ—Ç–∫–∞–∑ –ø—Ä–∏ `pending` —Å `auth.pending`.
  - `handlers/admin.py`: –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è ‚Äî –æ—Ç–∫–∞–∑ –ø—Ä–∏ `pending/blocked`; –ø—Ä–∏ `approved` –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–æ–ª—å `manager`.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: –∫–ª—é—á–∏ `auth.pending`, `auth.blocked`, `auth.approved` —É–∂–µ –µ—Å—Ç—å –≤ RU/UZ ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞.
- –ê–Ω—Ç–∏‚Äë—Å–ø–∞–º: –≤ –æ–¥–Ω–æ–º –∞–ø–¥–µ–π—Ç–µ –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ –≤ `data`).

6Ô∏è‚É£ –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø
- [ ] `blocked`: –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware.
- [ ] `pending`: —Ä–∞–±–æ—á–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –ø–æ –º–µ—Å—Ç—É; –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã.
- [ ] –í—Å–µ —Ç–µ–∫—Å—Ç—ã ‚Äî —á–µ—Ä–µ–∑ `get_text`; —Ñ–æ–ª–±—ç–∫ RU —Ä–∞–±–æ—Ç–∞–µ—Ç.
- [ ] –¢–µ—Å—Ç—ã —é–Ω–∏—Ç/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º –æ—Ç–∫–∞–∑–∞/—É—Å–ø–µ—Ö–∞ –∑–µ–ª—ë–Ω—ã–µ.


## ‚úÖ REFLECT AUTH-1 ‚Äî –ü–æ–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (pending/approved/blocked)

### –°–¥–µ–ª–∞–Ω–æ
- `middlewares/auth.py`:
  - –°–æ–æ–±—â–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é `get_text("auth.blocked")` —Å —É—á—ë—Ç–æ–º —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - –î–ª—è —Å—Ç–∞—Ç—É—Å–∞ `blocked` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º—è–≥–∫–∏–π —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ (–±–µ–∑ –≤—ã–∑–æ–≤–∞ —Ö—ç–Ω–¥–ª–µ—Ä–∞).
  - Fail‚Äësafe –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ.
- –†–∞–Ω–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `pending` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Ö—ç–Ω–¥–ª–µ—Ä—ã:
  - `uk_management_bot/handlers/requests.py`: —Å—Ç–∞—Ä—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏, –≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/—Å—Ä–æ—á–Ω–æ—Å—Ç–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
  - `uk_management_bot/handlers/shifts.py`: —Å—Ç–∞—Ä—Ç —Å–º–µ–Ω—ã, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–∞—á–∏.
  - `uk_management_bot/handlers/admin.py`: –ø–∞–Ω–µ–ª—å –∏ –≤—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è.
- –û—Ç–≤–µ—Ç—ã –ø—Ä–∏ `pending` ‚Äî –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ (`get_text("auth.pending")`).

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
- –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω—ã–π venv:
  - –ö–æ–º–∞–Ω–¥–∞: `"uk_management_bot/venv/bin/python" -m pytest -q`
  - –ò—Ç–æ–≥: **38 passed, 3 warnings** (~1.1s)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ):
  - SQLAlchemy `MovedIn20Warning` –¥–ª—è `declarative_base()`.
  - `SAWarning` –æ–± `overlaps` –¥–ª—è `Request.executor`/`User.executed_requests`.

### –í—ã–≤–æ–¥ / —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ DoD
- `blocked`: –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ + —Ä–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
- `pending`: —Ä–∞–±–æ—á–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è ¬´–ø–æ –º–µ—Å—Ç—É¬ª, –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ middleware/—Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
- –í—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ; —Ä–µ–≥—Ä–µ—Å—Å–∏–π –Ω–µ—Ç ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.

### –ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–æ/—É–ª—É—á—à–µ–Ω–∏—è
- –ê–Ω—Ç–∏‚Äë—Å–ø–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∞–ø–¥–µ–π—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ –≤ `data`) ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –ü—Ä–∏–≥–ª—É—à–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è SQLAlchemy:
  - –∑–∞–º–µ–Ω–∏—Ç—å `declarative_base()` –Ω–∞ `sqlalchemy.orm.declarative_base()`;
  - –¥–æ–±–∞–≤–∏—Ç—å `overlaps="executed_requests"` –∫ `Request.executor` –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `back_populates`.

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- `uk_management_bot/middlewares/auth.py`
- `uk_management_bot/handlers/requests.py`
- `uk_management_bot/handlers/shifts.py`
- `uk_management_bot/handlers/admin.py`

## PLAN AUTH-2 ‚Äî –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (RU/UZ)

### –¶–µ–ª–∏
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª–Ω–æ—Ç—É –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ª–æ–∫–∞–ª–µ–π RU/UZ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è–º.
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ–ª–±—ç–∫ –Ω–∞ RU –∏ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤.

### –û–±–ª–∞—Å—Ç—å —Ä–∞–±–æ—Ç
- –§–∞–π–ª—ã: `uk_management_bot/config/locales/ru.json`, `uk_management_bot/config/locales/uz.json`.
- –ú–æ–¥—É–ª–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π: `middlewares/auth.py`, `handlers/*`, `services/notification_service.py`, `utils/helpers.py`.

### –ö–ª—é—á–∏ –¥–ª—è –∞—É–¥–∏—Ç–∞/–¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å)
- `auth.blocked`, `auth.pending`, `auth.approved` ‚Äî —Ç–µ–∫—Å—Ç—ã —Å—Ç–∞—Ç—É—Å–æ–≤/–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
- `roles.applicant`, `roles.executor`, `roles.manager` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–æ–ª–µ–π.
- `errors.permission_denied` ‚Äî –æ—Ç–∫–∞–∑ –ø–æ –ø—Ä–∞–≤–∞–º.
- `notify.denied_title`, `notify.reason.rate_limited` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–∞–∑–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π.
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –≤–µ—Ä—Å–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (hint vs full) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `auth.pending_hint`.

### –ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã —Ç–æ–ª—å–∫–æ –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö: `{role}`, `{name}` –∏ —Ç. –ø.
- –ü–∞—Ä–∏—Ç–µ—Ç —ç–º–æ–¥–∑–∏/–ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –º–µ–∂–¥—É RU/UZ.
- –ë–µ–∑ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–ª—é—á–∞ –≤ UZ ‚Äî —Ñ–æ–ª–±—ç–∫ –Ω–∞ RU.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- –í –º–µ—Å—Ç–∞—Ö –≤—ã–∑–æ–≤–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–ª—é—á–∏ (`get_text("auth.blocked")`, `get_text("auth.pending")`).
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `get_text` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ AUTH‚Äë1 –¥–ª—è middleware; –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤/—Å–µ—Ä–≤–∏—Å–æ–≤).

### DoD (–∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏)
- RU/UZ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ; –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ—Ç.
- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã; –ø–∞—Ä–∏—Ç–µ—Ç —ç–º–æ–¥–∑–∏/–ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –≤—ã–¥–µ—Ä–∂–∞–Ω.
- –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ª–æ–∫–∞–ª–∏ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª—é—á–∏; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–æ–ª–±—ç–∫ –Ω–∞ RU.
- –¢–µ—Å—Ç—ã –ø–æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –∑–µ–ª—ë–Ω—ã–µ; —Ä–µ–≥—Ä–µ—Å—Å–∏–π –Ω–µ—Ç.

### –¢–µ—Å—Ç‚Äë–ø–ª–∞–Ω
- –Æ–Ω–∏—Ç: `utils.helpers.get_text`
  - –í–æ–∑–≤—Ä–∞—Ç RU/UZ –ø–æ –∫–ª—é—á–∞–º `auth.*`, `roles.*`, `errors.permission_denied`, `notify.*`.
  - –§–æ–ª–±—ç–∫ –Ω–∞ RU –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–ª—é—á–∞ –≤ UZ.
  - –ó–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
  - –°–æ–æ–±—â–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –≤ middleware: RU/UZ.
  - –û—Ç–∫–∞–∑—ã –ø—Ä–∏ `pending` –≤ `requests/shifts/admin`: RU/UZ.

### –ö–æ–º–∞–Ω–¥—ã
```bash
pytest -k "helpers or notifications or role_mode or auth" -q | cat
```

## CREATIVE AUTH-2 ‚Äî –î–∏–∑–∞–π–Ω –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

1Ô∏è‚É£ –ü–†–û–ë–õ–ï–ú–ê
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é RU/UZ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –ø–æ–¥—Å–∫–∞–∑–∫–∏ pending), —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ñ–æ–ª–±—ç–∫–æ–º –∏ –µ–¥–∏–Ω—ã–º —Å—Ç–∏–ª–µ–º (—ç–º–æ–¥–∑–∏, –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è, –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã).

2Ô∏è‚É£ –û–ü–¶–ò–ò
- A: ¬´–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è¬ª ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–µ–∫—É—â–∏—Ö –∫–ª—é—á–µ–π –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–æ—á–µ—á–Ω–æ.
- B: ¬´–ù–µ–π–º—Å–ø–µ–π—Å—ã –∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ¬ª ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ `auth.*`, `roles.*`, `errors.permission_denied`, `notify.*`; –¥–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π `auth.pending_hint`; –≤—ã—Ä–æ–≤–Ω—è—Ç—å —Å—Ç–∏–ª—å (—ç–º–æ–¥–∑–∏/–ø—É–Ω–∫—Ç—É–∞—Ü–∏—è/–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã).
- C: ¬´–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è¬ª ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–∏—Ç–µ—Ç–∞ –∫–ª—é—á–µ–π RU/UZ (—Ç–µ—Å—Ç/—É—Ç–∏–ª–∏—Ç–∞), –∞–≤—Ç–æ–ø–∞–¥–¥–∏–Ω–≥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º.

3Ô∏è‚É£ –ê–ù–ê–õ–ò–ó
| –ö—Ä–∏—Ç–µ—Ä–∏–π | A: –º–∏–Ω–∏–º–∞–ª | B: –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ | C: –≤–∞–ª–∏–¥–∞—Ç–æ—Ä |
|---|---|---|---|
| –°–∫–æ—Ä–æ—Å—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –ö–∞—á–µ—Å—Ç–≤–æ/—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê |
| –¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |

–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã:
- –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —É–∂–µ —Ö–æ—Ä–æ—à–µ–µ; –æ—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∫–ª—é—á–µ–π –∏ –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å (B), –∞ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä (C) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ.

4Ô∏è‚É£ –†–ï–®–ï–ù–ò–ï
- –í—ã–±—Ä–∞—Ç—å B —Å–µ–π—á–∞—Å (–±—ã—Å—Ç—Ä–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∏ —Ñ–∏–∫—Å–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ –∫–ª—é—á–µ–π), –æ—Å—Ç–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–Ω–µ–¥—Ä–∏—Ç—å C –∫–∞–∫ —É–ª—É—á—à–µ–Ω–∏–µ.

5Ô∏è‚É£ –ò–ú–ü–õ–ï–ú–ï–ù–¢–ê–¶–ò–û–ù–ù–´–ï –ó–ê–ú–ï–¢–ö–ò
- –ê—É–¥–∏—Ç –∏ –ø—Ä–∞–≤–∫–∏ –ª–æ–∫–∞–ª–µ–π:
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ: `auth.blocked`, `auth.pending`, `auth.approved`, `roles.*`, `errors.permission_denied`, `notify.denied_title`, `notify.reason.rate_limited`.
  - –î–æ–±–∞–≤–∏—Ç—å `auth.pending_hint` (–∫–æ—Ä–æ—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫).
  - –í—ã—Ä–æ–≤–Ω—è—Ç—å —ç–º–æ–¥–∑–∏ –∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é –º–µ–∂–¥—É RU/UZ; –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã —Ç–æ–ª—å–∫–æ `{name}`/`{role}` –∏ —Ç.–ø.
- –ê—É–¥–∏—Ç –∫–æ–¥–∞:
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –Ω–æ–≤—ã–µ/–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç; –∑–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –Ω–∞ `get_text` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —è–∑—ã–∫ –±–µ—Ä—ë—Ç—Å—è –∏–∑ `message.from_user.language_code`/`callback.from_user.language_code` —Å —Ñ–æ–ª–±—ç–∫–æ–º –Ω–∞ `ru`.
- (–ù–∞ –ø–æ—Ç–æ–º) –í–∞–ª–∏–¥–∞—Ü–∏—è: —Å–∫—Ä–∏–ø—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–π RU/UZ —Å –æ—Ç—á—ë—Ç–æ–º –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Ç–µ—Å—Ç—ã.

6Ô∏è‚É£ –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø
- [ ] –í RU/UZ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞, –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ—Ç.
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è `auth.blocked`/`auth.pending` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ middleware/—Ö—ç–Ω–¥–ª–µ—Ä–∞—Ö –¥–ª—è RU/UZ.
- [ ] –≠–º–æ–¥–∑–∏/–ø—É–Ω–∫—Ç—É–∞—Ü–∏—è/–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã –º–µ–∂–¥—É RU/UZ.
- [ ] –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã `get_text` –ø—Ä–æ—Ö–æ–¥—è—Ç (–≤–∫–ª—é—á–∞—è —Ñ–æ–ª–±—ç–∫ –∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤).

