# РАЗДЕЛ 3 — Система смен (сводка)

## Статус
- ✅ Завершён (100%)

## Область
- Модель и сервис смен: старт/сдача/форс‑завершение, одна активная смена на пользователя
- Контекст смен в `data['shift_context']`: `{ is_active: bool, shift: Optional[Shift] }`
- Уведомления о событиях смен (пользователь/канал), история с фильтрами и пагинацией

## Выполненные задачи
- 3.1 — Модель и сервис смен (`ShiftService` + тесты)
- 3.2 — Обработчики смен (`handlers/shifts.py`) и клавиатуры (`keyboards/shifts.py`)
- 3.3 — Уведомления по сменам (`services/notification_service.py`)
- 3.4 — Типы уведомлений и унификация сообщений
- 3.5 — Middleware контекст смен (`middlewares/shift.py`) + UX‑подсказки

## DoD
- Единый контекст смены доступен во всех апдейтах
- Fail‑safe поведение: на ошибках — безопасные дефолты
- История смен фильтруется, пагинация корректна
- Уведомления без дублей; локализованы
- Тесты по Разделу 3 зелёные; регрессий нет

## Артефакты
- `uk_management_bot/services/shift_service.py`, `uk_management_bot/middlewares/shift.py`
- `uk_management_bot/handlers/shifts.py`, `uk_management_bot/keyboards/shifts.py`
- `uk_management_bot/services/notification_service.py`
- Тесты: `test_shift_service.py`, интеграции в общих тестах


