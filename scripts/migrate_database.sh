#!/bin/bash
# üîÑ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
# –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –ë–î —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

set -e  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞
error() { echo -e "${RED}‚ùå $1${NC}"; }
success() { echo -e "${GREEN}‚úÖ $1${NC}"; }
info() { echo -e "${BLUE}‚ÑπÔ∏è  $1${NC}"; }
warning() { echo -e "${YELLOW}‚ö†Ô∏è  $1${NC}"; }

# –ë–∞–Ω–Ω–µ—Ä
echo ""
echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo "‚ïë   üîÑ UK Management Bot - Database Migration Tool          ‚ïë"
echo "‚ïë   –ü–µ—Ä–µ–Ω–æ—Å –ë–î —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä        ‚ïë"
echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
echo ""

# ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ã)
SERVER_USER="${1:-user}"
SERVER_IP="${2:-your-server-ip}"

# –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
LOCAL_COMPOSE="docker-compose.dev.yml"
BACKUP_DIR="$HOME/backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/uk_management_$TIMESTAMP.sql"
BACKUP_FILE_COMPRESSED="$BACKUP_DIR/uk_management_$TIMESTAMP.sql.gz"

# PostgreSQL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
PG_USER="uk_bot"
PG_DATABASE="uk_management"

# ==================== –ü–†–û–í–ï–†–ö–ò ====================

info "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
if [ "$SERVER_IP" == "your-server-ip" ]; then
    error "–ù–µ —É–∫–∞–∑–∞–Ω IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞!"
    echo ""
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:"
    echo "  $0 <server_user> <server_ip>"
    echo ""
    echo "–ü—Ä–∏–º–µ—Ä:"
    echo "  $0 user 192.168.1.100"
    exit 1
fi

success "–°–µ—Ä–≤–µ—Ä: $SERVER_USER@$SERVER_IP"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ docker-compose —Ñ–∞–π–ª–∞
if [ ! -f "$LOCAL_COMPOSE" ]; then
    error "–§–∞–π–ª $LOCAL_COMPOSE –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω
if ! docker info > /dev/null 2>&1; then
    error "Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
info "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É..."
if ! ssh -o ConnectTimeout=5 "$SERVER_USER@$SERVER_IP" "echo 'OK'" > /dev/null 2>&1; then
    error "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É $SERVER_IP"
    error "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–ª—é—á–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞"
    exit 1
fi
success "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"

# ==================== –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï ====================

echo ""
warning "–í–ê–ñ–ù–û: –≠—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è:"
warning "  ‚Ä¢ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–æ—Ç–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ"
warning "  ‚Ä¢ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
warning "  ‚Ä¢ –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (—Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã)"
warning "  ‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã"
echo ""

read -p "–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (yes/no): " -r
echo
if [[ ! $REPLY =~ ^[Yy]([Ee][Ss])?$ ]]; then
    info "–ú–∏–≥—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º"
    exit 0
fi

# ==================== BACKUP –ù–ê –õ–û–ö–ê–õ–¨–ù–û–ô –ú–ê–®–ò–ù–ï ====================

echo ""
info "========================================="
info "–®–∞–≥ 1/6: –°–æ–∑–¥–∞–Ω–∏–µ backup –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ"
info "========================================="

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è backups
mkdir -p "$BACKUP_DIR"
success "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è backup: $BACKUP_DIR"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î –∑–∞–ø—É—â–µ–Ω–∞
info "–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
docker-compose -f "$LOCAL_COMPOSE" up -d postgres > /dev/null 2>&1
sleep 3

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –ø–µ—Ä–µ–¥ backup
info "–ü–æ–¥—Å—á–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î..."
RECORD_COUNT=$(docker-compose -f "$LOCAL_COMPOSE" exec -T postgres psql -U "$PG_USER" -d "$PG_DATABASE" -t -c "
SELECT COUNT(*) FROM users;
" | tr -d ' ')
success "–ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: $RECORD_COUNT"

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞
info "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞..."
docker-compose -f "$LOCAL_COMPOSE" stop app > /dev/null 2>&1 || true
success "–õ–æ–∫–∞–ª—å–Ω—ã–π –±–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

# –°–æ–∑–¥–∞—Ç—å backup
info "–°–æ–∑–¥–∞–Ω–∏–µ backup —Ñ–∞–π–ª–∞..."
info "–§–∞–π–ª: $BACKUP_FILE"
docker-compose -f "$LOCAL_COMPOSE" exec -T postgres pg_dump \
  -U "$PG_USER" \
  -d "$PG_DATABASE" \
  --clean \
  --if-exists \
  --no-owner \
  --no-privileges \
  > "$BACKUP_FILE"

if [ ! -f "$BACKUP_FILE" ]; then
    error "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å backup —Ñ–∞–π–ª!"
    exit 1
fi

BACKUP_SIZE=$(du -h "$BACKUP_FILE" | cut -f1)
success "Backup —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ (—Ä–∞–∑–º–µ—Ä: $BACKUP_SIZE)"

# –°–∂–∞—Ç—å backup –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–¥–∞—á–∏
info "–°–∂–∞—Ç–∏–µ backup —Ñ–∞–π–ª–∞..."
gzip -c "$BACKUP_FILE" > "$BACKUP_FILE_COMPRESSED"
COMPRESSED_SIZE=$(du -h "$BACKUP_FILE_COMPRESSED" | cut -f1)
success "Backup —Å–∂–∞—Ç (—Ä–∞–∑–º–µ—Ä: $COMPRESSED_SIZE)"

# ==================== –ü–ï–†–ï–ù–û–° –ù–ê –°–ï–†–í–ï–† ====================

echo ""
info "========================================="
info "–®–∞–≥ 2/6: –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
info "========================================="

info "–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ $SERVER_IP..."
scp "$BACKUP_FILE_COMPRESSED" "$SERVER_USER@$SERVER_IP:~/uk_management_backup.sql.gz"
success "–§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä"

# ==================== BACKUP –ù–ê –°–ï–†–í–ï–†–ï ====================

echo ""
info "========================================="
info "–®–∞–≥ 3/6: –°–æ–∑–¥–∞–Ω–∏–µ backup —Ç–µ–∫—É—â–µ–π –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
info "========================================="

ssh "$SERVER_USER@$SERVER_IP" << 'ENDSSH'
set -e
cd ~/Infrasafe_bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
if ! docker ps | grep -q uk-postgres; then
    echo "‚ö†Ô∏è  PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å–∫–∞—é..."
    docker-compose -f docker-compose.unified.yml up -d postgres
    sleep 5
fi

# –°–æ–∑–¥–∞—Ç—å backup —Ç–µ–∫—É—â–µ–π –ë–î
echo "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ backup —Ç–µ–∫—É—â–µ–π –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ..."
docker exec uk-postgres pg_dump \
  -U uk_bot \
  -d uk_management \
  > ~/backup_before_migration_$(date +%Y%m%d_%H%M%S).sql || true

if [ -f ~/backup_before_migration_*.sql ]; then
    echo "‚úÖ Backup —Ç–µ–∫—É—â–µ–π –ë–î —Å–æ–∑–¥–∞–Ω"
    ls -lh ~/backup_before_migration_*.sql
else
    echo "‚ö†Ô∏è  –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—É—Å—Ç–∞, backup –Ω–µ —Å–æ–∑–¥–∞–Ω"
fi
ENDSSH

success "Backup —Ç–µ–∫—É—â–µ–π –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–Ω (–µ—Å–ª–∏ –±—ã–ª–∞)"

# ==================== –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ù–ê –°–ï–†–í–ï–†–ï ====================

echo ""
info "========================================="
info "–®–∞–≥ 4/6: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
info "========================================="

info "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î..."

ssh "$SERVER_USER@$SERVER_IP" << 'ENDSSH'
set -e
cd ~/Infrasafe_bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞..."
docker stop uk-bot > /dev/null 2>&1 || true

# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å backup
echo "üìÇ –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ backup..."
gunzip -c ~/uk_management_backup.sql.gz > ~/uk_management_backup.sql

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
echo "üóëÔ∏è  –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
docker exec uk-postgres psql -U uk_bot -d postgres -c "DROP DATABASE IF EXISTS uk_management;" > /dev/null 2>&1
docker exec uk-postgres psql -U uk_bot -d postgres -c "CREATE DATABASE uk_management OWNER uk_bot;" > /dev/null 2>&1
echo "‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∞"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
echo "üì• –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö..."
cat ~/uk_management_backup.sql | docker exec -i uk-postgres psql -U uk_bot -d uk_management > /dev/null 2>&1
echo "‚úÖ –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"

# –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
rm ~/uk_management_backup.sql
rm ~/uk_management_backup.sql.gz
echo "‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã"
ENDSSH

success "–î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"

# ==================== –ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–• ====================

echo ""
info "========================================="
info "–®–∞–≥ 5/6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö"
info "========================================="

info "–ü–æ–¥—Å—á–µ—Ç –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ..."

SERVER_RECORD_COUNT=$(ssh "$SERVER_USER@$SERVER_IP" "docker exec uk-postgres psql -U uk_bot -d uk_management -t -c 'SELECT COUNT(*) FROM users;'" | tr -d ' ')

success "–õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î: $RECORD_COUNT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
success "–°–µ—Ä–≤–µ—Ä–Ω–∞—è –ë–î: $SERVER_RECORD_COUNT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"

if [ "$RECORD_COUNT" -eq "$SERVER_RECORD_COUNT" ]; then
    success "‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π —Å–æ–≤–ø–∞–¥–∞–µ—Ç!"
else
    warning "‚ö†Ô∏è  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π —Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è!"
    warning "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é"
fi

# ==================== –ó–ê–ü–£–°–ö –ë–û–¢–ê ====================

echo ""
info "========================================="
info "–®–∞–≥ 6/6: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
info "========================================="

ssh "$SERVER_USER@$SERVER_IP" << 'ENDSSH'
cd ~/Infrasafe_bot
echo "üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞..."
docker start uk-bot
sleep 5
echo "üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤..."
docker logs --tail 20 uk-bot
ENDSSH

success "–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"

# ==================== –ó–ê–í–ï–†–®–ï–ù–ò–ï ====================

echo ""
success "========================================="
success "üéâ –ú–ò–ì–†–ê–¶–ò–Ø –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê!"
success "========================================="
echo ""
success "‚úÖ Backup —Å–æ–∑–¥–∞–Ω: $BACKUP_FILE"
success "‚úÖ Backup —Å–∂–∞—Ç—ã–π: $BACKUP_FILE_COMPRESSED"
success "‚úÖ –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä: $SERVER_IP"
success "‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
echo ""
info "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
info "  1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –≤ Telegram"
info "  2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ"
info "  3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ backup —Ñ–∞–π–ª—ã –º–∏–Ω–∏–º—É–º –Ω–µ–¥–µ–ª—é"
echo ""
warning "üí° –õ–æ–∫–∞–ª—å–Ω—ã–π –±–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
warning "   –ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å: docker-compose -f $LOCAL_COMPOSE up -d app"
echo ""

exit 0
