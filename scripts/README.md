# üóÑÔ∏è PostgreSQL Initialization Scripts

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è UK Management Bot —Å **—Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–∞–∫ –≤ SQLite**.

## üìÅ –§–∞–π–ª—ã

### üêò –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

#### `init_postgres.sql`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–æ–π SQL —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `uk_management`
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `uk_bot`
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
  - –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (uuid-ossp, pg_trgm, pg_stat_statements)
  - **–°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü —Å —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–∞–∫ –≤ SQLite**
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç SQLite –º–∏–≥—Ä–∞—Ü–∏–π)
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

#### `init_postgres.sh`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Bash —Å–∫—Ä–∏–ø—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**: –ü–æ—Å–ª–µ SQL —Å–∫—Ä–∏–ø—Ç–∞
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ PostgreSQL
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `check_postgres_init.sh`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**: –í—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å SQLite)**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤, —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –í—ã–≤–æ–¥ —Å–≤–æ–¥–∫–∏

### üîß –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã

#### `init_db.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Python —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SQLAlchemy –º–æ–¥–µ–ª–µ–π
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**: –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ SQLAlchemy
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### `grant_roles.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**: –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ–ª–µ–π
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
# –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
docker-compose up -d
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
docker-compose exec postgres bash /docker-entrypoint-initdb.d/check_postgres_init.sh

# –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
./scripts/check_postgres_init.sh
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
export CREATE_TEST_DATA=true
docker-compose up -d
```

## üìä –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è (SQLite-—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ò–º—è**: `uk_management`
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: UTF8
- **–í–ª–∞–¥–µ–ª–µ—Ü**: `postgres`

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **–ò–º—è**: `uk_bot`
- **–ü–∞—Ä–æ–ª—å**: `uk_bot_password`
- **–ü—Ä–∞–≤–∞**: –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è
- `uuid-ossp` - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ UUID
- `pg_trgm` - –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
- `pg_stat_statements` - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ö–µ–º—ã
- `public` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞
- `audit` - –¥–ª—è –∞—É–¥–∏—Ç–∞

### –¢–∞–±–ª–∏—Ü—ã (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ SQLite)

#### `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `id` (SERIAL PRIMARY KEY)
- `telegram_id` (INTEGER UNIQUE NOT NULL)
- `username` (VARCHAR(255))
- `first_name` (VARCHAR(255))
- `last_name` (VARCHAR(255))
- `role` (VARCHAR(50) DEFAULT 'applicant') - –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ
- `roles` (TEXT) - –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —Ä–æ–ª–µ–π –≤ JSON
- `active_role` (VARCHAR(50)) - –∞–∫—Ç–∏–≤–Ω–∞—è —Ä–æ–ª—å
- `status` (VARCHAR(50) DEFAULT 'pending')
- `language` (VARCHAR(10) DEFAULT 'ru')
- `phone` (VARCHAR(20))
- `address` (TEXT) - —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ
- `home_address` (TEXT) - –Ω–æ–≤–æ–µ –ø–æ–ª–µ
- `apartment_address` (TEXT) - –Ω–æ–≤–æ–µ –ø–æ–ª–µ
- `yard_address` (TEXT) - –Ω–æ–≤–æ–µ –ø–æ–ª–µ
- `address_type` (VARCHAR(20)) - —Ç–∏–ø –∞–¥—Ä–µ—Å–∞
- `specialization` (VARCHAR(50))
- `created_at` (TIMESTAMP WITH TIME ZONE)
- `updated_at` (TIMESTAMP WITH TIME ZONE)

#### `requests` - –ó–∞—è–≤–∫–∏
- `id` (SERIAL PRIMARY KEY)
- `user_id` (INTEGER REFERENCES users(id))
- `category` (VARCHAR(100))
- `status` (VARCHAR(50) DEFAULT '–ù–æ–≤–∞—è')
- `address` (TEXT)
- `description` (TEXT)
- `apartment` (VARCHAR(20))
- `urgency` (VARCHAR(20) DEFAULT '–û–±—ã—á–Ω–∞—è')
- `media_files` (JSONB DEFAULT '[]')
- `executor_id` (INTEGER REFERENCES users(id))
- `notes` (TEXT)
- `completion_report` (TEXT)
- `completion_media` (JSONB DEFAULT '[]')
- `created_at` (TIMESTAMP WITH TIME ZONE)
- `updated_at` (TIMESTAMP WITH TIME ZONE)
- `completed_at` (TIMESTAMP WITH TIME ZONE)

#### `shifts` - –°–º–µ–Ω—ã
- `id` (SERIAL PRIMARY KEY)
- `user_id` (INTEGER REFERENCES users(id))
- `start_time` (TIMESTAMP WITH TIME ZONE)
- `end_time` (TIMESTAMP WITH TIME ZONE)
- `status` (VARCHAR(50) DEFAULT 'active')
- `notes` (TEXT)
- `created_at` (TIMESTAMP WITH TIME ZONE)
- `updated_at` (TIMESTAMP WITH TIME ZONE)

#### `ratings` - –û—Ü–µ–Ω–∫–∏
- `id` (SERIAL PRIMARY KEY)
- `request_id` (INTEGER REFERENCES requests(id))
- `user_id` (INTEGER REFERENCES users(id))
- `rating` (INTEGER) - –æ—Ç 1 –¥–æ 5
- `review` (TEXT)
- `created_at` (TIMESTAMP WITH TIME ZONE)

#### `audit_logs` - –ê—É–¥–∏—Ç
- `id` (SERIAL PRIMARY KEY)
- `user_id` (INTEGER REFERENCES users(id))
- `action` (VARCHAR(100))
- `details` (JSONB)
- `ip_address` (VARCHAR(45))
- `created_at` (TIMESTAMP WITH TIME ZONE)

### –¢–∞–±–ª–∏—Ü—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `connection_log` - –ª–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- `performance_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `uk_bot` –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
- –ù–µ—Ç –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º

### SSL (–¥–ª—è production)
```sql
-- –í–∫–ª—é—á–∏—Ç—å –≤ production
ALTER SYSTEM SET ssl = on;
ALTER SYSTEM SET ssl_cert_file = '/path/to/cert.pem';
ALTER SYSTEM SET ssl_key_file = '/path/to/key.pem';
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```sql
-- –î–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö-—Å—Ä–µ–¥–Ω–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
ALTER SYSTEM SET shared_buffers = '256MB';
ALTER SYSTEM SET effective_cache_size = '1GB';
ALTER SYSTEM SET work_mem = '4MB';
ALTER SYSTEM SET maintenance_work_mem = '64MB';
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
SELECT * FROM pg_stat_statements ORDER BY total_time DESC LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
SELECT * FROM pg_stat_activity WHERE datname = 'uk_management';
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ (SQLite-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ)

### –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
1. **add_user_addresses** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –∞–¥—Ä–µ—Å–æ–≤
2. **add_user_roles_active_role** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ä–æ–ª–µ–π

### –ë–µ–∫—Ñ–∏–ª–ª –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `roles` –∏ `active_role` –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–ª—è `role`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `address_type = 'home'` –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–¥—Ä–µ—Å–æ–≤

## üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `check_rating_range` - —Ä–µ–π—Ç–∏–Ω–≥ –æ—Ç 1 –¥–æ 5
- `check_request_status` - –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫
- `check_shift_status` - –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Å–º–µ–Ω
- `check_user_status` - –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `check_user_language` - –≤–∞–ª–∏–¥–Ω—ã–µ —è–∑—ã–∫–∏

### –¢—Ä–∏–≥–≥–µ—Ä—ã
- `update_users_updated_at` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`
- `update_requests_updated_at` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`
- `update_shifts_updated_at` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PostgreSQL**:
   ```bash
   docker-compose logs postgres
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã**:
   ```bash
   chmod +x scripts/*.sh
   ```

3. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**:
   ```bash
   docker-compose down -v
   docker-compose up -d
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   ```bash
   docker-compose exec app env | grep DATABASE
   ```

2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**:
   ```bash
   docker-compose exec postgres psql -U uk_bot -d uk_management
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å SQLite

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
./scripts/check_postgres_init.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
docker-compose exec postgres psql -U uk_bot -d uk_management -c "\d users"
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –õ–æ–≥–∏ PostgreSQL: `docker-compose logs postgres`
- –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `docker-compose logs app`

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
SELECT * FROM connection_log ORDER BY connection_time DESC LIMIT 10;

-- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
SELECT * FROM performance_stats ORDER BY timestamp DESC LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
SELECT table_name, column_name, data_type 
FROM information_schema.columns 
WHERE table_schema = 'public' 
ORDER BY table_name, ordinal_position;
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
1. –î–æ–±–∞–≤—å—Ç–µ SQL –≤ `init_postgres.sql`
2. –û–±–Ω–æ–≤–∏—Ç–µ `check_postgres_init.sh`
3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã
2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å `docker-compose down -v`

### –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ SQLite
```bash
# –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ SQLite
sqlite3 uk_management.db ".dump" > sqlite_dump.sql

# –ò–º–ø–æ—Ä—Ç –≤ PostgreSQL (—Ç—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏)
psql -U uk_bot -d uk_management < adapted_sqlite_dump.sql
```

## ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### SQLite vs PostgreSQL
| –ê—Å–ø–µ–∫—Ç | SQLite | PostgreSQL |
|--------|--------|------------|
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü** | ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è | ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è |
| **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ |
| **–ò–Ω–¥–µ–∫—Å—ã** | ‚úÖ –°–æ–∑–¥–∞—é—Ç—Å—è | ‚úÖ –°–æ–∑–¥–∞—é—Ç—Å—è |
| **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** | ‚úÖ –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è | ‚úÖ –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è |
| **–ú–∏–≥—Ä–∞—Ü–∏–∏** | ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω—ã | ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω—ã |
| **–¢—Ä–∏–≥–≥–µ—Ä—ã** | ‚ùå –ù–µ—Ç | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ |

---

**PostgreSQL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –¥–ª—è UK Management Bot —Å –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é —Å SQLite! üöÄ**
