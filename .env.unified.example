# UK Management Bot + Media Service - Unified Environment Configuration
# Скопируйте этот файл в .env и настройте параметры

# ==================== TELEGRAM BOT ====================
# ОБЯЗАТЕЛЬНО: Токен основного UK Management бота (получите у @BotFather)
BOT_TOKEN=your_bot_token_here

# ОБЯЗАТЕЛЬНО: Токен Media Service бота (отдельный бот для медиа)
MEDIA_BOT_TOKEN=your_media_bot_token_here

# ID администраторов через запятую
ADMIN_IDS=123456789,987654321

# ID чата для системных уведомлений (опционально)
SYSTEM_CHAT_ID=

# ==================== DATABASE ====================
# PostgreSQL connection string
# ВАЖНО: Измените пароль для production!
# Формат: postgresql://username:password@host:port/database
# Если пароль содержит специальные символы (@, $, #), заключите его в URL-encoding
DATABASE_URL=postgresql://uk_bot:uk_bot_password@postgres:5432/uk_management

# Database credentials (для init scripts и docker-compose)
POSTGRES_DB=uk_management
POSTGRES_USER=uk_bot
POSTGRES_PASSWORD=uk_bot_password

# PostgreSQL порт (по умолчанию 5432)
# Для production рекомендуется не exposed наружу (закомментируйте ports в docker-compose)
POSTGRES_PORT=5432

# ==================== REDIS ====================
# Redis connection string для бота (DB 0)
REDIS_URL=redis://redis:6379/0

# Redis connection string для Media Service (DB 1)
MEDIA_REDIS_URL=redis://redis:6379/1

# Использовать Redis для rate limiting
USE_REDIS_RATE_LIMIT=true

# Redis settings
REDIS_MAX_MEMORY=512mb
REDIS_POLICY=allkeys-lru

# Redis порт (по умолчанию 6379)
# Для production рекомендуется не exposed наружу (закомментируйте ports в docker-compose)
REDIS_PORT=6379

# ==================== MEDIA SERVICE ====================
# URL Media Service (внутренний для бота)
MEDIA_SERVICE_URL=http://media-service:8000

# Telegram каналы для хранения медиа (ID каналов с минусом)
# По умолчанию используются каналы из config.py, но можно переопределить
CHANNEL_REQUESTS=-1003091883002   # uk_media_requests_private
CHANNEL_REPORTS=-1002969942316    # uk_media_reports_private
CHANNEL_ARCHIVE=-1002725515580    # uk_media_archive_private
CHANNEL_BACKUP=-1002951349061     # uk_media_backup_private

# Путь к файлу с каналами
CHANNELS_FILE_PATH=/app/data/channels.json

    # Директория для загрузок
UPLOAD_DIR=/app/data/uploads

# Максимальный размер файла (в байтах, 50MB по умолчанию)
MAX_FILE_SIZE=52428800

# Разрешенные расширения файлов
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,mp4,mov,avi,pdf,doc,docx,xls,xlsx,zip

# Media Service API ключ (опционально)
MEDIA_API_KEY=

# ==================== GOOGLE SHEETS ====================
# Google Sheets API credentials (опционально)
GOOGLE_SHEETS_ENABLED=false
GOOGLE_SHEETS_CREDENTIALS_FILE=
GOOGLE_SHEETS_SPREADSHEET_ID=

# ==================== LOGGING ====================
# Уровень логирования: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Формат логов: text, json
LOG_FORMAT=text

# Путь к файлу логов (опционально)
LOG_FILE=

# ==================== DEVELOPMENT ====================
# Режим отладки (true для development, false для production)
DEBUG=true

# Python buffering
PYTHONUNBUFFERED=1

# Автоматическая перезагрузка при изменении кода (для development)
RELOAD_ON_CHANGE=true

# ==================== PERFORMANCE ====================
# Количество воркеров для обработки запросов
WORKERS_COUNT=2

# Размер пула соединений к БД
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Таймауты (в секундах)
REQUEST_TIMEOUT=30
DB_TIMEOUT=10
REDIS_TIMEOUT=5

# ==================== RATE LIMITING ====================
# Rate limit для пользователей (запросов в минуту)
USER_RATE_LIMIT=30

# Rate limit для администраторов
ADMIN_RATE_LIMIT=100

# Rate limit для загрузки файлов
UPLOAD_RATE_LIMIT=10

# ==================== SECURITY ====================
# Секретный ключ для JWT токенов (сгенерируйте случайную строку)
SECRET_KEY=your_secret_key_here_change_in_production

# Срок действия токенов (в часах)
TOKEN_EXPIRE_HOURS=24

# Разрешить CORS (для development)
CORS_ENABLED=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8010

# ==================== FEATURES ====================
# Включить систему смен
SHIFTS_ENABLED=true

# Включить AI-оптимизацию назначений
AI_ASSIGNMENT_ENABLED=true

# Включить систему уведомлений
NOTIFICATIONS_ENABLED=true

# Включить аналитику
ANALYTICS_ENABLED=true

# Включить экспорт в Google Sheets
EXPORT_ENABLED=false

# ==================== SCHEDULER ====================
# Включить фоновый планировщик задач
SCHEDULER_ENABLED=true

# Часовой пояс
TIMEZONE=Asia/Tashkent

# Время запуска ежедневных задач (формат HH:MM)
DAILY_TASKS_TIME=09:00

# ==================== MONITORING ====================
# Включить healthcheck endpoint
HEALTHCHECK_ENABLED=true

# Порт для healthcheck (внутренний)
HEALTHCHECK_PORT=8000

# Включить метрики Prometheus
METRICS_ENABLED=false
METRICS_PORT=9090

# ==================== EMAIL (опционально) ====================
# Email настройки для уведомлений
EMAIL_ENABLED=false
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=

# ==================== SMS (опционально) ====================
# SMS провайдер для уведомлений
SMS_ENABLED=false
SMS_PROVIDER=
SMS_API_KEY=
SMS_FROM=

# ==================== BACKUP ====================
# Автоматический backup БД
AUTO_BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # Каждый день в 2:00
BACKUP_RETENTION_DAYS=7

# ==================== ADVANCED ====================
# Уровень детализации SQL запросов
SQL_ECHO=false

# Проверка соединений к БД
DB_PRE_PING=true

# Кодировка БД
DB_ENCODING=UTF8

# Locale для PostgreSQL
DB_LOCALE=C

# ==================== NOTES ====================
# Примеры значений:
# BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
# ADMIN_IDS=123456789,987654321
# SECRET_KEY=$(openssl rand -hex 32)
# MAX_FILE_SIZE=52428800  # 50 MB
# REDIS_URL=redis://username:password@localhost:6379/0

# Генерация секретного ключа:
# openssl rand -hex 32

# Получение токена бота:
# 1. Найдите @BotFather в Telegram
# 2. Отправьте /newbot
# 3. Следуйте инструкциям
# 4. Скопируйте полученный токен

# Получение ID пользователя:
# 1. Найдите @userinfobot в Telegram
# 2. Отправьте /start
# 3. Бот покажет ваш ID
