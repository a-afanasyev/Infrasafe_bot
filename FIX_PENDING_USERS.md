# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending` –ø–æ–ª—É—á–∞–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –≤–∏–¥–µ–ª–∏ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" –∏ –º–æ–≥–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö `telegram_id`
- **–ü—Ä–æ–±–ª–µ–º–∞**: `telegram_id` –∏–º–µ–ª —Ç–∏–ø `INTEGER`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –º–æ–≥ —Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6055402868)
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω –Ω–∞ `BIGINT` –≤ –º–æ–¥–µ–ª–∏ `User` –∏ —Å—Ö–µ–º–µ PostgreSQL
- **–§–∞–π–ª—ã**: `uk_management_bot/database/models/user.py`, `scripts/init_postgres.sql`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: –§—É–Ω–∫—Ü–∏—è `get_main_keyboard_for_role` –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user_status` –∏ –ª–æ–≥–∏–∫–∞ —Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" –¥–ª—è `pending` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–§–∞–π–ª—ã**: `uk_management_bot/keyboards/base.py`

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user_status` –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `get_main_keyboard_for_role`
- **–§–∞–π–ª—ã**: 
  - `uk_management_bot/handlers/base.py`
  - `uk_management_bot/handlers/auth.py`
  - `uk_management_bot/handlers/onboarding.py`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`pending`):
- ‚úÖ –ü–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ù–ï –≤–∏–¥—è—Ç –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" (—Å–∫—Ä—ã—Ç–∞ –∏–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- ‚úÖ –ú–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–º–æ—â—å
- ‚úÖ –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

### –î–ª—è –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`approved`):
- ‚úÖ –í–∏–¥—è—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏, –≤–∫–ª—é—á–∞—è "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É"
- ‚úÖ –ú–æ–≥—É—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞ —Å middleware
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ middleware –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑-–∑–∞ –ø–æ—Ä—è–¥–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ aiogram 3.x. –†–µ—à–µ–Ω–∏–µ:
1. –î–æ–±–∞–≤–∏–ª–∏ middleware –Ω–∞–ø—Ä—è–º—É—é –≤ —Ä–æ—É—Ç–µ—Ä—ã: `requests_router` –∏ `base_router`
2. Middleware —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç `user_status` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

### –õ–æ–≥–∏–∫–∞ —Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏
- –§—É–Ω–∫—Ü–∏—è `get_main_keyboard_for_role` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `user_status`
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `user_status`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
   - –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
   - –ù–ï –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É"
   - –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

2. **–û–¥–æ–±—Ä–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
   - –í–∏–¥–∏—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏, –≤–∫–ª—é—á–∞—è "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É"
   - –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏

## üîÑ Hot-Reload
–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ hot-reload –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ
